<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="color-scheme" content="light dark"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up | ByteAether</title><meta name="description" content="Welcome to the seventh and final article in our series on building an enterprise-grade Data Access Layer (DAL) in C#. Over the last six posts, we have method..."/><meta name="keywords" content="posts, Linq2Db, Database, SQL, LINQ, c#, csharp, dotnet, .net, byteaether, blog, tech, programming"/><meta name="author" content="Joonatan Uusväli"/><link rel="canonical" href="https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/"/><script type="application/ld+json">{
	"@context": "https://schema.org",
	"@type": "BlogPosting",
	"mainEntityOfPage": {
		"@type": "WebPage",
		"@id": "https://byteaether.github.io/"
	},
	"headline": "Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up",
	"description": "Welcome to the seventh and final article in our series on building an enterprise-grade Data Access Layer (DAL) in C#. Over the last six posts, we have method...",
	"image": "https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.jpeg",
	"author": {
		"@type": "Person",
		"name": "Joonatan Uusväli"
	},
	"publisher": {
		"@type": "Organization",
		"name": "ByteAether",
		"logo": {
			"@type": "ImageObject",
			"url": "https://byteaether.github.io/assets/icon.svg"
		}
	},
	"datePublished": "2025-12-01",
	"dateModified": "2025-12-01"
}</script><link rel="icon" href="/favicon.ico" sizes="any"/><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta property="og:url" content="https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/"/><meta property="og:type" content="website"/><meta property="og:title" content="Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up | ByteAether"/><meta property="og:description" content="Welcome to the seventh and final article in our series on building an enterprise-grade Data Access Layer (DAL) in C#. Over the last six posts, we have method..."/><meta property="og:image" content="https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.jpeg"/><meta property="og:image:type" content="image/jpeg"/><meta property="og:image:width" content="1024"/><meta property="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up | ByteAether"/><meta name="twitter:description" content="Welcome to the seventh and final article in our series on building an enterprise-grade Data Access Layer (DAL) in C#. Over the last six posts, we have method..."/><meta name="twitter:image" content="https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.jpeg"/><meta name="robots" content="index, follow"/><link rel="alternate" href="https://byteaether.github.io/feed/feed.xml" type="application/atom+xml" title="ByteAether"/><meta name="format-detection" content="telephone=no"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta http-equiv="cache-control" content="public, max-age=86400, must-revalidate"/><meta name="generator" content="Eleventy v3.1.2"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-LEY00265EM"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-LEY00265EM")</script><link rel="stylesheet" href="/css/dnTXazc6iC.css"/><link rel="stylesheet" href="/css/YO6a_ZKOnb.css"/><script type="text/javascript">const themeManager={init:function(){this.set(this.get())},toggle:function(){this.set("dark"==this.get()?"light":"dark")},set:function(e){document.documentElement.dataset.theme=e,localStorage.theme=e,this.updateGiscusTheme()},get:function(){return document.documentElement.dataset.theme??localStorage.theme??(window.matchMedia&&window.matchMedia("prefers-color-scheme: dark")?"dark":null)??"light"},updateGiscusTheme:function(){const e="dark"===themeManager.get()?"dark":"light",t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}};themeManager.init()</script></head><body><header><div id="header-container"><a href="/" class="header-left"><img src="/assets/icon.svg" alt="Logo" class="logo-img"/> ByteAether</a><nav class="desktop-nav"><ul><li><a href="/">Home</a></li><li><a href="/search/">Search</a></li><li><a href="/series/">Series</a></li><li><a href="/tags/">Tags</a></li><li><a href="/archive/">Archive</a></li><li><a href="/about/">About</a></li></ul></nav><div class="header-right"><a href="https://github.com/ByteAether" title="ByteAether" target="_blank"><svg class="icon" aria-hidden="true"><use href="#fab-fa-github" xlink:href="#fab-fa-github"></use></svg></a><a href="/feed/feed.xml" title="Feed" target="_blank"><svg class="icon" aria-hidden="true"><use href="#fas-fa-square-rss" xlink:href="#fas-fa-square-rss"></use></svg></a><span onclick="themeManager.toggle()"><svg class="icon" aria-hidden="true"><use href="#fas-fa-sun" xlink:href="#fas-fa-sun"></use></svg></span><label for="nav-toggle" class="burger-menu"><svg class="icon" aria-hidden="true"><use href="#fas-fa-bars" xlink:href="#fas-fa-bars"></use></svg></label></div><input type="checkbox" id="nav-toggle" class="nav-toggle"/><nav class="mobile-nav"><ul><li><a href="/">Home</a></li><li><a href="/search/">Search</a></li><li><a href="/series/">Series</a></li><li><a href="/tags/">Tags</a></li><li><a href="/archive/">Archive</a></li><li><a href="/about/">About</a></li></ul></nav></div></header><div class="content-wrapper"><main id="skip" style="grid-area:main"><heading-anchors><a href="#skip" class="visually-hidden">Skip to main content</a><article><picture><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-400.avif" media="(width < 400px)" type="image/avif"/><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-400.webp" media="(width < 400px)" type="image/webp"/><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-600.avif" media="(width < 600px)" type="image/avif"/><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-600.webp" media="(width < 600px)" type="image/webp"/><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.avif" media="(width >= 600px)" type="image/avif"/><source srcset="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.webp" media="(width >= 600px)" type="image/webp"/><img src="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-1024.jpeg" alt="Illustration image for an article" class="banner" fetchpriority="high"/></picture><h1 class="post-title" data-pagefind-meta="title, image:/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/gSf3EJ4tWD-300.jpeg" data-pagefind-sort="date:2025-12-01">Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up</h1><div class="post-meta"><div class="post-metadata"><div><svg class="icon" aria-hidden="true"><use href="#far-fa-calendar" xlink:href="#far-fa-calendar"></use></svg> <time datetime="2025-12-01" data-pagefind-meta="Published" title="Published at 2025-12-01">2025-12-01</time> <span style="display:none" data-pagefind-filter="Year">2025</span></div><div data-words="1,842 words"><svg class="icon" aria-hidden="true"><use href="#far-fa-clock" xlink:href="#far-fa-clock"></use></svg> 9 minutes</div><div><svg class="icon" aria-hidden="true"><use href="#fas-fa-rectangle-list" xlink:href="#fas-fa-rectangle-list"></use></svg> <span class="serie" data-pagefind-filter="Series"><a href="/series/enterprise-dal/">Enterprise DAL</a></span></div><div><svg class="icon" aria-hidden="true"><use href="#fas-fa-tags" xlink:href="#fas-fa-tags"></use></svg> <span class="tag" data-pagefind-filter="Tags"><a href="/tags/linq2db/">Linq2Db</a></span> <span class="tag" data-pagefind-filter="Tags"><a href="/tags/database/">Database</a></span> <span class="tag" data-pagefind-filter="Tags"><a href="/tags/sql/">SQL</a></span> <span class="tag" data-pagefind-filter="Tags"><a href="/tags/linq/">LINQ</a></span></div></div></div><div data-pagefind-body=""><p>Welcome to the seventh and final article in our series on building an enterprise-grade Data Access Layer (DAL) in C#. Over the last six posts, we have methodically built a robust, automated, and secure DAL using a database-first philosophy with C# and Linq2Db.</p><p>We've tackled soft-deletes, timestamp auditing, multi-tenancy, and even complex projected row-level security. In our <a href="/2025/building-an-enterprise-data-access-layer-the-foundation/">very first article</a>, we set a high bar for the capabilities our DAL must provide. Today, we implement the final missing piece: <strong>automated user auditing</strong> (<code>CreatedByUser</code> / <code>ModifiedByUser</code>).</p><p>Once that's in place, we'll hold a full retrospective to see how our final architecture stacks up against our original goals, and finally, we'll look at what challenges lie beyond this series.</p><h2 id="implementing-user-auditing" tabindex="-1">Implementing User Auditing</h2><p>So far, our audit fields (<code>CreatedAt</code>, <code>ModifiedAt</code>) tell us <em>when</em> a record was changed. User auditing completes the picture by telling us <em>who</em> made that change. This is a common requirement for compliance, traceability, and debugging.</p><p>Our goal is to automatically populate <code>CreatedByUserId</code> on insert and <code>ModifiedByUserId</code> on insert and update, using the <code>UserId</code> from our request-scoped context. We will follow the exact same pattern of &quot;behavioral interfaces&quot; that we established in <a href="/2025/building-an-enterprise-data-access-layer-automated-auditing/">Part 3 (Auditing)</a> and <a href="/2025/building-an-enterprise-data-access-layer-automated-soft-delete/">Part 4 (Soft-Delete)</a>.</p><h3 id="the-schema-and-interface-contracts" tabindex="-1">The Schema and Interface Contracts</h3><p>Following our database-first approach, we first update the database schema. We add <code>created_by_user_id ulid not null</code> and <code>modified_by_user_id ulid not null</code> columns to the <code>post</code> and <code>comment</code> tables, both with foreign keys referencing the <code>user</code> table.</p><p>Next, we define the C# contracts in <code>DAL.Base/EntityBehavior/</code>:</p><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> <span class="token namespace">DAL<span class="token punctuation">.</span>Base<span class="token punctuation">.</span>EntityBehavior</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserCreatable</span>
<span class="token punctuation">{</span>
	<span class="token return-type class-name">Ulid</span> CreatedByUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">namespace</span> <span class="token namespace">DAL<span class="token punctuation">.</span>Base<span class="token punctuation">.</span>EntityBehavior</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserModifiable</span>
<span class="token punctuation">{</span>
	<span class="token return-type class-name">Ulid</span> ModifiedByUserId <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre><p>These simple interfaces define the properties our DAL will automatically manage.</p><h3 id="automated-scaffolding" tabindex="-1">Automated Scaffolding</h3><p>With the database and interfaces in place, we update our custom scaffolding interceptor (<code>DAL.ScaffoldInterceptor/Interceptor.cs</code>).</p><p>Just as it was configured to detect <code>created_at</code> and attach <code>ICreatable</code>, we've now taught it to look for <code>created_by_user_id</code> and <code>modified_by_user_id</code> columns. When it finds them, it automatically adds <code>IUserCreatable</code> and <code>IUserModifiable</code> to the generated partial entity classes in <code>DbCtx.generated.cs</code>.</p><p>This is the power of our architecture: the database schema remains the single source of truth. A schema change, followed by a re-scaffold, is all that's needed to make the C# code aware of this new behavior.</p><h3 id="updating-the-crud-extensions" tabindex="-1">Updating the CRUD Extensions</h3><p>The final step is to update our <code>CrudExtensions.cs</code> file to enforce the logic. We need to fetch the current user's ID from our <code>IDbCtx</code> (which we added in <a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/">Part 6</a>) and assign it.</p><p>We update <code>CreateAsync</code>, <code>ModifyAsync</code> (for single entity), and <code>ModifyAsync</code> (for fluent queries) to handle these new interfaces.</p><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">></span></span> <span class="token generic-method"><span class="token function">CreateAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
	<span class="token keyword">this</span> <span class="token class-name">IDbCtx</span> ctx<span class="token punctuation">,</span>
	<span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> entities<span class="token punctuation">,</span>
	<span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span>
<span class="token punctuation">)</span>
	<span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">IEntity</span></span>
	<span class="token operator">=></span> <span class="token punctuation">(</span>
		<span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token function">BulkCopyAsync</span><span class="token punctuation">(</span>
			entities<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>e <span class="token operator">=></span>
				<span class="token punctuation">{</span>
					<span class="token comment">// Timestamp Auditing (from Part 3)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>
						e <span class="token keyword">is</span> <span class="token class-name">ICreatable</span> creatable
						<span class="token operator">&amp;&amp;</span> creatable<span class="token punctuation">.</span>CreatedAt <span class="token operator">==</span> <span class="token keyword">default</span>
					<span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						creatable<span class="token punctuation">.</span>CreatedAt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// NEW: User Create Auditing</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>
						e <span class="token keyword">is</span> <span class="token class-name">IUserCreatable</span> userCreatable
						<span class="token operator">&amp;&amp;</span> userCreatable<span class="token punctuation">.</span>CreatedByUserId <span class="token operator">==</span> <span class="token keyword">default</span>
					<span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						userCreatable<span class="token punctuation">.</span>CreatedByUserId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>Attributes<span class="token punctuation">.</span>UserId <span class="token operator">??</span> Ulid<span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// Timestamp Auditing (from Part 3)</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>
						e <span class="token keyword">is</span> <span class="token class-name">IModifiable</span> updateable
						<span class="token operator">&amp;&amp;</span> updateable<span class="token punctuation">.</span>ModifiedAt <span class="token operator">==</span> <span class="token keyword">default</span>
					<span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						updateable<span class="token punctuation">.</span>ModifiedAt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// NEW: User Modify Auditing</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>
						e <span class="token keyword">is</span> <span class="token class-name">IUserModifiable</span> userUpdateable
						<span class="token operator">&amp;&amp;</span> userUpdateable<span class="token punctuation">.</span>ModifiedByUserId <span class="token operator">==</span> <span class="token keyword">default</span>
					<span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						userUpdateable<span class="token punctuation">.</span>ModifiedByUserId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>Attributes<span class="token punctuation">.</span>UserId <span class="token operator">??</span> Ulid<span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">return</span> e<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">)</span><span class="token punctuation">,</span>
			cancellationToken
		<span class="token punctuation">)</span>
	<span class="token punctuation">)</span><span class="token punctuation">.</span>RowsCopied<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">></span></span> <span class="token generic-method"><span class="token function">ModifyAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
	<span class="token keyword">this</span> <span class="token class-name">IDbCtx</span> ctx<span class="token punctuation">,</span>
	<span class="token class-name">T</span> entity<span class="token punctuation">,</span>
	<span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span>
<span class="token punctuation">)</span>
	<span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">IEntity</span></span>
<span class="token punctuation">{</span>
	<span class="token comment">// Timestamp Auditing (from Part 3)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token class-name">IModifiable</span> updateable<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		updateable<span class="token punctuation">.</span>ModifiedAt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>UtcNow<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// NEW: User Modify Auditing</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>entity <span class="token keyword">is</span> <span class="token class-name">IUserModifiable</span> userUpdateable<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		userUpdateable<span class="token punctuation">.</span>ModifiedByUserId <span class="token operator">=</span> ctx<span class="token punctuation">.</span>Attributes<span class="token punctuation">.</span>UserId <span class="token operator">??</span> Ulid<span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">UpdateOptimisticAsync</span><span class="token punctuation">(</span>entity<span class="token punctuation">,</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h3 id="the-iupdatable-nuance" tabindex="-1">The <code>IUpdatable</code> Nuance</h3><p>The fluent <code>ModifyAsync</code> extension (which operates on <code>IUpdatable&lt;T&gt;</code>) presents a unique challenge. This method is what allows us to write code like <code>ctx.GetTable&lt;Post&gt;().Where(p =&gt; p.Id == id).ModifyAsync()</code>.</p><p>To inject the <code>ModifiedByUserId</code> value, we need the <code>IDbCtx</code> instance to get the <code>ctx.Attributes.UserId</code>. However, the <code>IUpdatable&lt;T&gt;</code> (which is essentially an <code>IQueryable</code>) doesn't expose its parent context directly.</p><p>To solve this, we use a helper provided by Linq2Db:</p><pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">></span></span> <span class="token generic-method"><span class="token function">ModifyAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>
	<span class="token keyword">this</span> <span class="token class-name">IUpdatable<span class="token punctuation">&lt;</span>T<span class="token punctuation">></span></span> source<span class="token punctuation">,</span>
	<span class="token class-name">CancellationToken</span> cancellationToken <span class="token operator">=</span> <span class="token keyword">default</span>
<span class="token punctuation">)</span>
	<span class="token keyword">where</span> <span class="token class-name">T</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token keyword">class</span></span>
<span class="token punctuation">{</span>
	<span class="token comment">// Timestamp Auditing (from Part 3)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IModifiable</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsAssignableFrom</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>
			x <span class="token operator">=></span> Sql<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Property</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IModifiable<span class="token punctuation">.</span>ModifiedAt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			DateTime<span class="token punctuation">.</span>UtcNow
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// NEW: User Modify Auditing</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">IUserModifiable</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsAssignableFrom</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// Get the DbCtx from the query</span>
		<span class="token class-name"><span class="token keyword">var</span></span> dbCtx <span class="token operator">=</span> Internals<span class="token punctuation">.</span><span class="token function">GetDataContext</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">IDbCtx</span><span class="token punctuation">;</span>
		source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>
			x <span class="token operator">=></span> Sql<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Property</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Ulid<span class="token punctuation">></span></span></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>IUserModifiable<span class="token punctuation">.</span>ModifiedByUserId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			dbCtx<span class="token punctuation">?.</span>Attributes<span class="token punctuation">.</span>UserId <span class="token operator">??</span> Ulid<span class="token punctuation">.</span>Empty
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">UpdateAsync</span><span class="token punctuation">(</span>cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>The key part is <code>(LinqToDB.Internal.Linq.)Internals.GetDataContext(source)</code>. While using an <code>Internal</code> namespace is generally something to be wary of, it is a pragmatic and necessary solution in this advanced scenario. It allows us to bridge our fluent query API with our request-scoped context, ensuring user auditing is applied even during batch <code>UPDATE</code> operations.</p><p>And with that, our final automated behavior is implemented.</p><h3 id="the-result%3A-a-fully-automated-query" tabindex="-1">The Result: A Fully Automated Query</h3><p>To see all our work come together, let's look at the simple <code>ModifyAsync</code> call from our <code>Program.cs</code> that updates a <code>Comment</code>:</p><pre class="language-csharp"><code class="language-csharp"><span class="token comment">// Try to update a protected comment entity</span>
<span class="token keyword">await</span> ctx<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetTable</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Comment<span class="token punctuation">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span>x <span class="token operator">=></span> x<span class="token punctuation">.</span>Content<span class="token punctuation">,</span> <span class="token string">"asd123"</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">ModifyAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>When this C# code executes, our DAL intercepts it and, using all the logic from this series, generates the following comprehensive SQL query:</p><pre class="language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span>
	<span class="token punctuation">[</span><span class="token keyword">comment</span><span class="token punctuation">]</span>
<span class="token keyword">SET</span>
	<span class="token punctuation">[</span>content<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'asd123'</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>modified_at<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'2025-11-12 15:31:11.972'</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>modified_by_user_id<span class="token punctuation">]</span> <span class="token operator">=</span> X<span class="token string">'019A78B1378CC2EC0F1736EE8D4F1E8F'</span>
<span class="token keyword">FROM</span>
	<span class="token punctuation">[</span>post<span class="token punctuation">]</span> <span class="token punctuation">[</span>a_Post<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token keyword">user</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>a_User<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>permission<span class="token punctuation">]</span> <span class="token punctuation">[</span>b<span class="token punctuation">]</span>
<span class="token keyword">WHERE</span>
	<span class="token punctuation">[</span>a_User<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>removed_at<span class="token punctuation">]</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span>a_User<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>tenant_id<span class="token punctuation">]</span> <span class="token operator">=</span> X<span class="token string">'019A78B13787E6060BF9BA9A51DAA2C6'</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span>a_Post<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>removed_at<span class="token punctuation">]</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span><span class="token keyword">comment</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>removed_at<span class="token punctuation">]</span> <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span><span class="token keyword">comment</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>post_id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>a_Post<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span>a_Post<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>user_id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>a_User<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>object_id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>a_Post<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">AND</span>
	<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>subject_id<span class="token punctuation">]</span> <span class="token operator">=</span> X<span class="token string">'019A78B1378CC2EC0F1736EE8D4F1E8F'</span></code></pre><p>This single <code>UPDATE</code> statement perfectly demonstrates our entire architecture working in harmony. The <code>SET</code> clause not only updates the <code>content</code> but also automatically injects <strong><code>modified_at</code></strong> (from <a href="/2025/building-an-enterprise-data-access-layer-automated-auditing/">Part 3</a>) and our new <strong><code>modified_by_user_id</code></strong> field.</p><p>Furthermore, the <code>WHERE</code> clause is a composition of all our global filters:</p><ul><li><strong>Soft-Delete (<code>removed_at IS NULL</code>)</strong> on <code>user</code>, <code>post</code>, and <code>comment</code>.</li><li><strong>Multi-Tenancy (<code>tenant_id = ...</code>)</strong> on the <code>user</code> table (a projected filter).</li><li><strong>Row-Level Security (<code>[b].[object_id] = ...</code>)</strong> by joining the <code>permission</code> table (another projected filter).</li></ul><p>This is the automation we set out to build, all abstracted from the developer who just called <code>.ModifyAsync()</code>.</p><h2 id="achieving-our-goals" tabindex="-1">Achieving Our Goals</h2><p>In our <a href="/2025/building-an-enterprise-data-access-layer-the-foundation/">first article</a>, we defined a clear set of requirements for an enterprise DAL. Our mission was to automate cross-cutting concerns to prevent errors and reduce technical debt. Let's review our original checklist.</p><ul><li><p><strong>Soft-Delete:</strong></p><ul><li><strong>Goal:</strong> Automatically filter out records marked with a <code>DeletedAt</code> timestamp on all read operations.</li><li><strong>Achieved:</strong> Yes. In <a href="/2025/building-an-enterprise-data-access-layer-automated-soft-delete/">Part 4</a>, we implemented <code>IRemovable</code> and a composable global query filter system. This system automatically and ubiquitously applies the <code>WHERE [removed_at] IS NULL</code> clause to all queries, including joins. We also overrode <code>DeleteAsync</code> to transparently convert deletes into updates.</li></ul></li><li><p><strong>Timestamp Auditing:</strong></p><ul><li><strong>Goal:</strong> Automatically populate <code>CreatedAt</code> and <code>ModifiedAt</code> timestamps.</li><li><strong>Achieved:</strong> Yes. In <a href="/2025/building-an-enterprise-data-access-layer-automated-auditing/">Part 3</a>, we used <code>ICreatable</code> and <code>IModifiable</code> interfaces and <code>CrudExtensions</code> to inject the current timestamp during create and modify operations.</li></ul></li><li><p><strong>User Auditing:</strong></p><ul><li><strong>Goal:</strong> Automatically populate <code>CreatedByUserId</code> and <code>ModifiedByUserId</code> with the current user's ID.</li><li><strong>Achieved:</strong> Yes. We just completed this in the first section of this article, using the exact same robust pattern (<code>IUserCreatable</code>, <code>IUserModifiable</code>).</li></ul></li><li><p><strong>Multi-Tenancy Filtering:</strong></p><ul><li><strong>Goal:</strong> Automatically inject a <code>WHERE TenantId = [CurrentTenantId]</code> clause for all tenant-owned entities.</li><li><strong>Achieved:</strong> Yes. In <a href="/2025/building-an-enterprise-data-access-layer-composable-multi-tenancy-filtering/">Part 5</a>, we leveraged our composable filter system by introducing the <code>ITenanted</code> interface. This filter reads the <code>TenantId</code> from our request-scoped <code>DbCtxAttributes</code> and applies the filter.</li></ul></li><li><p><strong>Projected Data Support:</strong></p><ul><li><strong>Goal:</strong> Resolve contextual IDs (like <code>TenantId</code> or permission IDs) even when they are on a related entity.</li><li><strong>Achieved:</strong> Yes. This was a critical success and a key differentiator for Linq2Db.<ol><li><strong>Projected Tenancy:</strong> In <a href="/2025/building-an-enterprise-data-access-layer-composable-multi-tenancy-filtering/">Part 5</a>, our <code>Post</code> entity implemented <code>ITenanted</code> by defining its <code>TenantId</code> via an <code>[ExpressionMethod]</code> that navigated to its parent <code>User</code> (<code>x =&gt; x.User.TenantId</code>).</li><li><strong>Projected Permissions:</strong> In <a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/">Part 6</a>, our <code>Comment</code> entity implemented <code>IProtected</code> by projecting its permission <code>ObjectId</code> from its parent <code>Post</code> (<code>x =&gt; x.Post.Id</code>).</li></ol></li><li>In both cases, Linq2Db correctly translated these C# expressions into the necessary SQL <code>INNER JOIN</code>s and <code>WHERE</code> clauses.</li></ul></li><li><p><strong>Entity-Based Permissions (RLS):</strong></p><ul><li><strong>Goal:</strong> Automatically filter rows that the current user is not authorized to see.</li><li><strong>Achieved:</strong> Yes. In <a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/">Part 6</a>, we built our final and most complex filter, <code>IProtected</code>. This filter joins against the <code>permission</code> table using the current <code>UserId</code>, effectively implementing row-level security transparently.</li></ul></li></ul><p><strong>Verdict:</strong> We successfully implemented 100% of our initial goals. The final composed query, which Linq2Db generates by combining all these filters, is a testament to the power of this composable, interface-driven architecture.</p><h2 id="future-ideas" tabindex="-1">Future Ideas</h2><p>While this series is complete, the work of a systems architect is never truly finished. Our DAL is robust, but it exists within a larger ecosystem. Here are a few topics worth exploring next:</p><ul><li><strong>Database Migrations and CI Pipelines:</strong> We've perfected the <em>runtime</em> behavior of our DAL, but we've manually managed schema changes. A critical next step would be to build a full-fledged CI/CD pipeline. This would involve using a migration tool to manage schema evolution, and building a pipeline that runs tests, applies migrations, performs health checks, and supports automatic rollbacks.</li><li><strong>Full History Support:</strong> In our first article, we deliberately scoped out full history support, settling for soft-deletes and simple audit stamps. For systems with deep compliance or analytical needs (e.g., &quot;what did this record look like on June 1st?&quot;), this isn't enough. A fascinating challenge would be to implement a full temporal history or versioning system directly within the DAL.</li><li><strong>Replicating this with EF Core:</strong> Replicating this architecture in EF Core, .NET's most popular ORM, would be a significant challenge. While its Global Query Filters are identical, necessitating the same composable filter system, other aspects diverge. EF Core's &quot;code-first&quot; preference and reliance on a Change Tracker (Unit of Work) would fundamentally alter our scaffolding and <code>CrudExtensions</code> implementation. The largest obstacle would be projected properties, as EF Core lacks native support for <code>[ExpressionMethod]</code>, requiring a deep investigation into community libraries to handle our projected tenancy and RLS.</li></ul><h2 id="conclusion" tabindex="-1">Conclusion</h2><p>Thank you for following this series. We began with an ambitious set of goals for a &quot;perfect&quot; DAL, and through seven articles, we've built it piece by piece. We have a Data Access Layer that is truly &quot;enterprise-ready&quot; - it is secure by default, resilient to common errors, and abstracts immense complexity away from the business logic.</p><p>The final code for this article, and the entire series, is available on GitHub.</p><p><strong>Full Source Code: <a href="https://github.com/ByteAether/EnterpriseDal/tree/part7" target="_blank" rel="noopener noreferrer">https://github.com/ByteAether/EnterpriseDal/tree/part7</a></strong></p><p>I hope this series has provided a valuable blueprint for your own advanced data access architectures.</p></div></article><div class="social"><b>Share:</b> <a href="https://www.facebook.com/sharer/sharer.php?u=https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/" target="_blank" rel="noopener" aria-label="Share on Facebook (opens new tab)"><svg class="icon" aria-hidden="true"><use href="#fab-fa-facebook-f" xlink:href="#fab-fa-facebook-f"></use></svg> </a><a href="https://www.linkedin.com/sharing/share-offsite/?url=https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/" target="_blank" rel="noopener" aria-label="Share on LinkedIn (opens new tab)"><svg class="icon" aria-hidden="true"><use href="#fab-fa-linkedin" xlink:href="#fab-fa-linkedin"></use></svg> </a><a href="https://twitter.com/intent/tweet/?text=Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up&url=https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/" target="_blank" rel="noopener" aria-label="Share on Twitter (opens new tab)"><svg class="icon" aria-hidden="true"><use href="#fab-fa-twitter" xlink:href="#fab-fa-twitter"></use></svg> </a><a href="https://bsky.app/intent/compose?text=https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/" target="_blank" rel="noopener" aria-label="Share on Bluesky (opens new tab)"><svg class="icon" aria-hidden="true"><use href="#fab-fa-bluesky" xlink:href="#fab-fa-bluesky"></use></svg> </a><a aria-label="Copy page link to clipboard" onclick="copyUrlToClipboard()" role="link"><svg class="icon" aria-hidden="true"><use href="#fas-fa-link" xlink:href="#fas-fa-link"></use></svg></a></div></heading-anchors></main><aside style="grid-area:aside"><div class="sticky-container"><div class="recents-container aside-content"><span><b>Recent Posts</b></span><div><nav><ol><li><a href="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/">The Weight of Decisions: Solving Weighted Random Sorting at Scale</a></li><li><a href="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/">Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up</a></li><li><a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/">Building an Enterprise Data Access Layer: Composable Row-Level Security</a></li><li><a href="/2025/announcing-byteaetherulid-132-net-10-support-and-optimized-design/">Announcing ByteAether.Ulid 1.3.2: .NET 10 Support and Optimized Design</a></li><li><a href="/2025/building-an-enterprise-data-access-layer-composable-multi-tenancy-filtering/">Building an Enterprise Data Access Layer: Composable Multi-Tenancy Filtering</a></li></ol></nav></div></div><div class="toc-container"><div class="toc-sticky aside-content"><span><b>Table of Contents</b></span><div><nav class="toc"><ol><li><a href="#implementing-user-auditing">Implementing User Auditing</a><ol><li><a href="#the-schema-and-interface-contracts">The Schema and Interface Contracts</a></li><li><a href="#automated-scaffolding">Automated Scaffolding</a></li><li><a href="#updating-the-crud-extensions">Updating the CRUD Extensions</a></li><li><a href="#the-iupdatable-nuance">The IUpdatable Nuance</a></li><li><a href="#the-result%3A-a-fully-automated-query">The Result: A Fully Automated Query</a></li></ol></li><li><a href="#achieving-our-goals">Achieving Our Goals</a></li><li><a href="#future-ideas">Future Ideas</a></li><li><a href="#conclusion">Conclusion</a></li></ol></nav></div></div></div></div></aside><div class="bottom-content" style="grid-area:bottom"><div class="series"><h2><a href="/series/enterprise-dal/">Enterprise DAL</a> series</h2><a href="/2025/building-an-enterprise-data-access-layer-the-foundation/" class="box">Building an Enterprise Data Access Layer: The Foundation<span style="color:var(--text-color)"> - 2025-09-25</span> </a><a href="/2025/building-an-enterprise-data-access-layer-database-and-code-structure/" class="box">Building an Enterprise Data Access Layer: Database and Code Structure<span style="color:var(--text-color)"> - 2025-10-07</span> </a><a href="/2025/building-an-enterprise-data-access-layer-automated-auditing/" class="box">Building an Enterprise Data Access Layer: Automated Auditing<span style="color:var(--text-color)"> - 2025-10-24</span> </a><a href="/2025/building-an-enterprise-data-access-layer-automated-soft-delete/" class="box">Building an Enterprise Data Access Layer: Automated Soft-Delete<span style="color:var(--text-color)"> - 2025-11-04</span> </a><a href="/2025/building-an-enterprise-data-access-layer-composable-multi-tenancy-filtering/" class="box">Building an Enterprise Data Access Layer: Composable Multi-Tenancy Filtering<span style="color:var(--text-color)"> - 2025-11-11</span> </a><a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/" class="box">Building an Enterprise Data Access Layer: Composable Row-Level Security<span style="color:var(--text-color)"> - 2025-11-24</span> </a><a href="/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/" class="box active">Building an Enterprise Data Access Layer: Automated User Auditing and Series Wrap-up<span style="color:var(--text-color)"> - 2025-12-01</span></a></div><hr/><div class="links-nextprev"><a href="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/" class="box"><picture><source srcset="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/FxpI67foge-400.avif" media="(width < 600px)" type="image/avif"/><source srcset="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/FxpI67foge-400.webp" media="(width < 600px)" type="image/webp"/><source srcset="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/FxpI67foge-600.avif" media="(width >= 600px)" type="image/avif"/><source srcset="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/FxpI67foge-600.webp" media="(width >= 600px)" type="image/webp"/><img src="/2026/the-weight-of-decisions-solving-weighted-random-sorting-at-scale/FxpI67foge-600.jpeg" alt="Illustration image for an article" class="banner" loading="lazy"/></picture><div>The Weight of Decisions: Solving Weighted Random Sorting at Scale</div><div style="color:var(--text-color)">← Newer</div></a><a href="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/" class="box"><picture><source srcset="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/YC2FpKRHDy-400.avif" media="(width < 400px)" type="image/avif"/><source srcset="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/YC2FpKRHDy-400.webp" media="(width < 400px)" type="image/webp"/><source srcset="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/YC2FpKRHDy-600.avif" media="(width >= 400px)" type="image/avif"/><source srcset="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/YC2FpKRHDy-600.webp" media="(width >= 400px)" type="image/webp"/><img src="/2025/building-an-enterprise-data-access-layer-composable-row-level-security/YC2FpKRHDy-600.jpeg" alt="Illustration image for an article" class="banner" loading="lazy"/></picture><div>Building an Enterprise Data Access Layer: Composable Row-Level Security</div><div style="color:var(--text-color);text-align:right">Older →</div></a></div><div id="giscus-comments"></div><script>document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("giscus-comments"),e=document.createElement("script");e.src="https://giscus.app/client.js",e.setAttribute("data-repo","ByteAether/byteaether.github.io"),e.setAttribute("data-repo-id","R_kgDONqpeLw"),e.setAttribute("data-category","Comments"),e.setAttribute("data-category-id","DIC_kwDONqpeL84CmBvx"),e.setAttribute("data-mapping","pathname"),e.setAttribute("data-strict","0"),e.setAttribute("data-reactions-enabled","1"),e.setAttribute("data-emit-metadata","0"),e.setAttribute("data-input-position","top"),e.setAttribute("data-theme",themeManager.get()),e.setAttribute("data-lang","en"),e.setAttribute("data-loading","lazy"),e.setAttribute("crossorigin","anonymous"),e.async=!0,t.appendChild(e)})</script></div></div><footer><div class="footer-container"><div>ByteAether 2025</div><a href="https://github.com/ByteAether" title="ByteAether" target="_blank"><svg class="icon" aria-hidden="true"><use href="#fab-fa-github" xlink:href="#fab-fa-github"></use></svg></a><a href="/feed/feed.xml" title="Feed" target="_blank"><svg class="icon" aria-hidden="true"><use href="#fas-fa-square-rss" xlink:href="#fas-fa-square-rss"></use></svg></a><span onclick="themeManager.toggle()"><svg class="icon" aria-hidden="true"><use href="#fas-fa-sun" xlink:href="#fas-fa-sun"></use></svg></span></div></footer><svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" id="fab-fa-github"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="square-rss" class="svg-inline--fa fa-square-rss" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="fas-fa-square-rss"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="fas-fa-sun"><path fill="currentColor" d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="fas-fa-bars"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="far" data-icon="calendar" class="svg-inline--fa fa-calendar" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="far-fa-calendar"><path fill="currentColor" d="M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L64 64C28.7 64 0 92.7 0 128l0 16 0 48L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-256 0-48 0-16c0-35.3-28.7-64-64-64l-40 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L152 64l0-40zM48 192l352 0 0 256c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="far" data-icon="clock" class="svg-inline--fa fa-clock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="far-fa-clock"><path fill="currentColor" d="M464 256A208 208 0 1 1 48 256a208 208 0 1 1 416 0zM0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rectangle-list" class="svg-inline--fa fa-rectangle-list" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" id="fas-fa-rectangle-list"><path fill="currentColor" d="M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM128 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm32-128a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM128 384a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm96-248c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="fas-fa-tags"><path fill="currentColor" d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" class="svg-inline--fa fa-facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" id="fab-fa-facebook-f"><path fill="currentColor" d="M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" id="fab-fa-linkedin"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="fab-fa-twitter"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fab" data-icon="bluesky" class="svg-inline--fa fa-bluesky" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="fab-fa-bluesky"><path fill="currentColor" d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"></path></symbol></svg>
<svg style="display: none;"><symbol aria-hidden="true" focusable="false" data-prefix="fas" data-icon="link" class="svg-inline--fa fa-link" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" id="fas-fa-link"><path fill="currentColor" d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"></path></symbol></svg><script defer="" type="module" src="/js/ovU2bMHLr3.js"></script>
		<!-- This page `https://byteaether.github.io/2025/building-an-enterprise-data-access-layer-automated-user-auditing-and-series-wrap-up/` was built on 2026-01-08 12:26:40 -->
		</body></html>